<div class="session-container vh-100 overflow-hidden">
  <div class="row h-100">
    <div class="col-md-4 py-md-3 agenda-panel-col overflow-auto">
      <div class="sessions-page-component-header">
        <%= @session.book.title %> Bookclub Agenda
      </div>
      <%= render partial: 'agenda_panel', locals: { session: @session, attendees: @attendees } %>
      <div class="submit-agenda-point">
        <%= render partial: 'agenda_form' %>
      </div>
    </div>
    <div class="col-md-8 py-md-3 zoom-col overflow-hidden">
      <div class="zoom-container h-100 d-flex flex-column">
        <div class="sessions-page-component-header-white mb-3"
            data-controller="countdown"
            data-countdown-start-time-value="<%= @session.start_time.iso8601 %>">
          <i class="fa-regular fa-clock fa-sm"></i>
          Starting in <span data-countdown-target="time"></span>
          <% if current_user && current_user.attendees.find_by(session_id: @session.id)&.host? %>
            <button class="btn-rsvp" data-session-id="<%= @session.id %>" data-action="click->meeting-creation#startMeeting">Start Meeting</button>
          <% end %>
        </div>
        <div class="flex-grow-1 overflow-hidden">
          <% if @session.room_url.nil? %>
            <%= render "chatrooms/chats", chatroom: @chatroom %>
          <% else %>
            <iframe class="w-100 h-100" src="<%= @current_user_attendee.host? ? @session.host_url : @session.room_url %>" allow="camera; microphone; fullscreen; speaker; display-capture; compute-pressure"></iframe>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
